# 変換するためのプログラム群

ここに用意したプログラム群はWindows上で動かすことを前提に作られています。  
他人が使うことを想定していないので、実行は自己責任でお願いいたします。  
安全性を高めるため、実行のためには専用のフォルダを作ってください。  
ファイルの破壊やメモリリークなどが高確率で起こり得ます。  

## txt2html
実行ファイルと同じフォルダに以下のファイルを置いてください。  
- 原稿データの入った「site」というフォルダ
- template.txt　（HTMLのテンプレート）
- template_noad.txt　(広告無し版のテンプレート）

実行すると同じフォルダに新規で「converted」と「converted_noad」という
二つのフォルダが作成され、その中にHTMLファイルが作られます。  
フォルダが作られない可能性があります。（私が仕様を忘れているため）  
その場合には申し訳ございませんが手動で作ってから実行してください。  

「converted_noad」に生成されるHTMLはアップロード前に手元で見栄えを確認するためのもので、
数式をMathJaxで表示することを前提にしています。  
正しく表示させるために、別に用意したcssファイルを適切な場所に設置する必要があります。  
  
「converted」に生成されるHTMLは元は広告付きのアップロード用だったのですが、
現在は数式を表示するためにMathJaxを使わないようにしたので、もう一段の変換作業が必要になっています。

## svg_changer
実行ファイルと同じフォルダに以下のファイルを置いてください。  
- txt2htmlで作成したHTMLファイルの入った「converted」というフォルダ
- header.tex　（LaTeXを使って変換するための基本設定を記述したファイル)

以下のバッチファイルが用意されています。svg_changer.exeを直接実行するのではなく、バッチファイルを使って実行してください。
- SVG_new.bat (新しく作成されたファイルを探し出して変換作業を行います）
- SVG_noimg.bat (新しく作成されたファイルを探し出して数式画像を作らずに変換作業を行います。数式以外を微修正した場合に使います)
- SVG_noimg_all.bat （全てのファイルに対して数式画像を作らずに変換作業を行います。記事自体には変更がなく、テンプレートのみを変更した場合に使います）

実行すると同じフォルダに新規で「svg_ver」というフォルダが作成され、
その中にHTMLファイルと数式画像フォルダが作られます。  
「svg_ver」フォルダが作られない可能性があります。（私が仕様を忘れているため）  
その場合には申し訳ございませんが手動で作ってから実行してください。  

この実行ファイルはLaTeXシステムに依存しています。  
大量のコマンドプロンプトを開き、platexやdvisbgmを呼び出し、同時実行します。  
あらかじめ LaTeXをインストールし、これらの実行ができるようにPATHを設定するなどしてください。  

作業用フォルダ「work」が自動的に作成されます。画像作成時の中間ファイルなどが入ります。  
変換が終わったら削除してしまって構いません。

作成される画像データはsvgファイルです。  
これらは現在日時を含んだ名前のフォルダに格納されます。  
記事を修正してアップロードした際の、ブラウザのキャッシュによる誤表示を防ぐためです。  

作成されたデータは適切な位置にcssファイルを置かないときれいに表示されません。
作成されたフォルダの構造をそのままアップロードしてください。

## RSSmaker
最近作成されたファイルを探し出して自動的にRSSファイルを作成します。

## make_sitemap
最近作成されたファイルを探し出して自動的にsitemapファイルを作成します。
同じフォルダに sitemap_dat.txt を置いてください。解説記事以外の固定データを記述したものです。
